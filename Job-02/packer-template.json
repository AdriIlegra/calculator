{
  "variables": {
    "docker_hub_username": "",
    "docker_hub_password": ""
  },
    "builders": [
        {
        "type": "docker",
        "image": "ubuntu",
        "commit": true,
          "changes" : [
        "EXPOSE 8888",
        "ENTRYPOINT  [\"java\", \"-jar\", \"calculator.jar\"]"
      ]
    }
    ],

    "provisioners": [
        {
            "type": "file",
            "source": "calculator.jar",
            "destination": "/home/ubuntu/calculator.jar"
        },
        {
            "type": "shell",
            "inline": [
                "docker login -u \"{{user `docker_hub_username`}}\" -p \"{{user `docker_hub_password`}}\"",
                "docker tag ubuntu {{user `docker_hub_username`}}/ubuntu",
                "docker push {{user `docker_hub_username`}}/ubuntu"
            ]
        }
    ]
}
